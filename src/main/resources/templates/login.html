<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="/libs/webix.min.css" type="text/css">
    <script src="/libs/webix.min.js" type="text/javascript"></script>
    <title th:utext="${application_name + '. Вход'}"></title>
</head>
<body>
<div id="login"></div>
<!--<div th:text="${message}" style="color: red;"></div>-->

<script th:inline="javascript">
    const APPLICATION_NAME = [[${application_name}]]
    let message = [[${message}]] || ''

    console.log(message)

    webix.ui(
        {
            rows: [
                {
                    view: 'toolbar',
                    //height: 40,
                    autoheight: true,
                    cols: [
                        {
                            view: 'label',
                            label: `<span style="font-size: 1.5rem">${APPLICATION_NAME}. Список заявок.</span>`,
                        },
                    ]
                },
                {
                    gravity: 0.2,
                },
                {
                    cols: [
                        {},
                        {
                            container: 'login',
                            view: "form",
                            id: "log_form",
                            width: 400,
                            height: 200,
                            margintop: 50,
                            elements: [
                                {view: "text", label: "Имя пользователя", name: "username", labelWidth: 150},
                                {view: "text", type: "password", label: "Пароль", name: "password", labelWidth: 150},
                                {
                                    margin: 5, cols: [
                                        {view: "button", value: "Войти", css: "webix_primary", click: submit},
                                        //{ view:"button", value:"Cancel"}
                                    ]
                                },
                                {
                                    view: 'label',
                                    label: message //'<span style="color: red;"' + message + '</span>'
                                }
                            ]
                        },
                        {}
                    ]
                },
                {}
        ]
    });
    function submit(){
        //webix.message(JSON.stringify($$("log_form").getValues(), null, 2));
        webix.send("perform_login", $$("log_form").getValues());
    }
</script>
</body>
</html>
